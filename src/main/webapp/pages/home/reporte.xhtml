<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:form id="formReporte">
        <script>
            function exportChartInPDF() {
                var docDefinition = {
                    content: [
                        'Line Chart',
                        {
                            image: $(PF('chart').exportAsImage()).attr('src'),
                            width: 520
                        }
                    ]
                }
                pdfMake.createPdf(docDefinition).open();
                pdfMake.createPdf(docDefinition).download('reporte.pdf');
            }
        </script>

        <p:chart type="bar" model="#{reporteMb.barModel}" 
                 widgetVar="chart"
                 responsive="true"
                 />
        <p:commandButton type="button" value="Exportar pdf" icon="pi pi-home" onclick="exportChartInPDF()"/>
        <p:dialog widgetVar="dlg" showEffect="fade" header="Reporte como imagen" resizable="false">
            <p:outputPanel id="output" layout="block" style="width:500px;height:300px"/>
        </p:dialog>
    </h:form>
</ui:composition>